---
title: "CFA Exercise"
output:
  html_document:
    toc: true
    toc_float: false
    toc_depth: 4
---

```{r, include = F, message = F, echo = F}
library(lavaan)
```

```{r}
covmat <- '
0.870           
0.345 0.765          
0.270 0.333 1.775         
0.312 0.279 0.446 0.781        
-0.210 -0.301 -0.386 -0.364 2.182       
-0.223 -0.200 -0.371 -0.451 0.936 2.178      
-0.235 -0.234 -0.369 -0.347 0.876 1.520 2.283     
-0.207 -0.236 -0.220 -0.240 0.704 0.595 0.601 1.255    
-0.065 -0.095 -0.325 -0.309 0.625 0.749 0.850 0.462 2.752   
-0.078 -0.085 -0.253 -0.318 0.512 0.640 0.741 0.379 1.915 2.472  
-0.136 -0.226 -0.518 -0.376 0.854 0.746 0.930 0.512 1.709 1.545 2.924 
-0.106 -0.253 -0.295 -0.415 1.016 0.869 0.867 0.589 1.198 1.097 1.349 2.747
'

cfa.cov <- getCov(covmat,names=c("i4", "i7", "i9", "i17", "i5", "i10", "i11", "i15", "i1", "i2", "i3", "i6"))

cfa.model <- '
FEE =~ 1*i1 + i2 + i3 + i6
FD =~ 1*i5 + i10 + i11 + i15
FPA =~ NA*i4 + i7 + i9 + i17
FPA ~~ 1*FPA
FEE ~~ FD + FPA
FD ~~ FPA
'

cfa.fit <- sem(cfa.model, sample.cov = cfa.cov, sample.nobs=580)
summary(cfa.fit, fit.measures=T, standardized = T)

```

